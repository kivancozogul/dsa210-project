pip install nba_api pandas matplotlib seaborn scipy

import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
from nba_api.stats.endpoints import leaguegamelog, leaguedashplayerstats
from scipy import stats

print("Veri çekiliyor... (Bu işlem internet hızına göre 1-2 dk sürebilir)")

# 1. VERİYİ ÇEK (NBA API)
# 2010 vs 2024 sezonlarını karşılaştırma verisi
def get_season_data(season_id):
    # Logları çekiyoruz
    log = leaguegamelog.LeagueGameLog(season=season_id, player_or_team_abbreviation='T')
    df = log.get_data_frames()[0]
    df['SEASON_ID'] = season_id
    return df

# Eski ve Yeni sezonu çekip birleştir
df_2010 = get_season_data('2010-11')
df_2024 = get_season_data('2023-24')
df_all = pd.concat([df_2010, df_2024])

# 2. ZENGİNLEŞTİRME (ENRICHMENT) 
# Oyuncu pozisyonlarını çekiyoruz
player_stats = leaguedashplayerstats.LeagueDashPlayerStats(season='2023-24')
df_players = player_stats.get_data_frames()[0]

# Pozisyonları sadeleştir (Guard, Forward, Center)
def simplify_pos(pos):
    if 'G' in pos: return 'Guard'
    elif 'F' in pos: return 'Forward'
    elif 'C' in pos: return 'Center'
    return 'Other'

df_players['SIMPLE_POS'] = df_players['PLAYER_POSITION'].apply(simplify_pos)

# 3. DOSYALARI KAYDET (SOMUT KANIT)
# Bu satırlar klasörüne CSV dosyalarını oluşturacak
df_all.to_csv('nba_games_data.csv', index=False)
df_players.to_csv('nba_player_positions.csv', index=False)

print("✅ İŞLEM TAMAM! Dosyalar klasörüne kaydedildi.")

# 4. GRAFİK ÇİZ (EDA) 
plt.figure(figsize=(10, 6))
sns.boxplot(x='SEASON_ID', y='FG3A', data=df_all)
plt.title('2010 vs 2024: 3 Sayı Atışlarındaki Artış')
plt.savefig('chart_output.png') # Grafiği de resim olarak kaydet
plt.show()
